---
apiVersion: grafana.integreatly.org/v1beta1
kind: GrafanaNotificationPolicy
metadata:
  name: test
spec:
  instanceSelector:
    matchLabels:
      instance: "my-grafana-stack"
  route:
    # NOTE: starting from Grafana 12.4.0, "empty" receiver is pre-provisioned instead of grafana-default-email
    receiver: empty
    group_by:
      - grafana_folder
      - alertname
    routes:
      - receiver: operations-team
        object_matchers:
          - - team
            - =
            - operations
        routes:
          - object_matchers:
              - - severity
                - =
                - high
            repeat_interval: 5m
      - receiver: security-team
        object_matchers:
          - - team
            - =
            - security
